# Week 11

## 1 题目分析

题目要求编写基于字符串类的超长整数类，实现超长整数的加法和减法。

## 2 实现思路

1. 设计 `CIntByString` 类， 实现超长整数的储存、设置与输出。

2. 以友元函数的形式重载运算符 $+ \text{ }-$，配合函数 `isLower`、`add`、`sub` 实现超长整数的加法和减法。

3. 运算符 $+ \text{ }-$ 的重载设计中，根据两个超长整数的符号进行分类，判断结果的符号，并调用 `add` 和 `sub` 计算结果绝对值

4. `isLower`、`add`、`sub` 参数均为两个 string 类型，内容为超长整数的绝对值，用于判断两数绝对值大小、计算绝对值之和与差

## 3 算法模型

1. 运算符 $+ \text{ }-$ 的重载设计中，根据两个超长整数的符号进行分类，判断结果的符号，并调用 `add` 和 `sub` 计算结果绝对值：

   加法运算 $a+b$ ：
   1. 符号相同，则结果符号 = 两数符号，数值部分调用 `add`
   2. 符号不同，则结果符号 = 绝对值较大数符号，数值部分调用 `sub`

   减法运算 $a-b$ ：
   1. 符号相同，比较绝对值获得结果符号，若 $|a| \geq |b|$ ,则符号与 a 相同，否则符号与 a 相反；数值部分调用 `sub`
   2. 符号不同，则结果符号 = a符号，数值部分调用 `add`

4. `isLower`、`add`、`sub` 参数均为两个 string 类型字符串，内容为超长整数的绝对值

   `isLower` 通过比较两个 string 的长度及字典序，判断两数绝对值大小

   `add` 从数字低位向高位遍历，用临时变量记录进位

   `sub` 需要参数 $|a| \geq |b|$ ，这样计算出的结果无负号。从低位向高位遍历，用临时变量记录借位。
   * 减法中会出现高位减至0的情况，用以下语句消去前置0
     ```cpp
     if(result[0] == '0')
         result.erase(0, result.find_first_not_of('0'));
     ```

## 4 代码运行方法

 平台：Visual Studio 2022

 x64 release

## 5 测试报告

### 测试样例设计思路

按照两数的正负、绝对值大小进行划分；测试样例中需包含加法进位、减法借位的情况

加法（两数等价）

1. 两数均为0
2. 一正一0
3. 一负一0
4. 两数均为正数
5. 两数均为负数
6. 一正一负

减法 $a-b$

1. $a=b=0$
2. $a>0 , b=0$
3. $a<0 , b=0$
4. $a=0 , b>0$
5. $a=0 , b<0$
6. $a>0 , b>0, |a|=|b|$
7. $a>0 , b>0, |a|>|b|$
8. $a>0 , b>0, |a|<|b|$
9. $a<0 , b<0, |a|=|b|$
10. $a<0 , b<0, |a|>|b|$
11. $a<0 , b<0, |a|<|b|$
12. $a>0 , b<0$
13. $a<0 , b>0$

### 测试

#### 加法

1. 两数均为0
   ```
   a: 0    b: 0
   a + b = 0
   ```
2. 一正一0
   ```
   a: 1234567890000000000000000000000    b: 0
   a + b = 1234567890000000000000000000000
   ```
3. 一负一0
   ```
   a: -9    b: 0
   a + b = -9
   ```
4. 两数均为正数
   ```
   a: 12345    b: 54321
   a + b = 66666

   a: 99    b: 99
   a + b = 198
   ```
5. 两数均为负数
   ```
   a: -100    b: -1
   a + b = -101
   ```
6. 一正一负
   ```
   a: 2023012175    b: -2023012175
   a + b = 0
   ```

#### 减法 $a-b$

1. $a=b=0$
   ```
   a: 0    b: 0
   a - b = 0
   ```
2. $a>0 , b=0$
   ```
   a: 123456123456123456123456    b: 0
   a - b = 123456123456123456123456
   ```
3. $a<0 , b=0$
   ```
   a: -1234567890000000    b: 0
   a - b = -1234567890000000
   ```
4. $a=0 , b>0$
   ```
   a: 0    b: 100
   a - b = -100
   ```
5. $a=0 , b<0$
   ```
   a: 0    b: -99
   a - b = 99
   ```
6. $a>0 , b>0, |a|=|b|$
   ```
   a: 100    b: 100
   a - b = 0
   ```
7. $a>0 , b>0, |a|>|b|$
   ```
   a: 200    b: 100
   a - b = 100
   ```
8. $a>0 , b>0, |a|<|b|$
   ```
   a: 1    b: 2
   a - b = -1
   ```
9. $a<0 , b<0, |a|=|b|$
   ```
   a: -5    b: -5
   a - b = 0
   ```
10. $a<0 , b<0, |a|>|b|$
    ```
    a: -100    b: -1
    a - b = -99
    ```
11. $a<0 , b<0, |a|<|b|$
    ```
    a: -50    b: -100
    a - b = 50
    ```
12. $a>0 , b<0$
    ```
    a: 100    b: -1
    a - b = 101
    ```
13. $a<0 , b>0$
    ```
    a: -10    b: 1
    a - b = -11
    ```
